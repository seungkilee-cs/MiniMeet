<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# Perfect! ðŸŽ‰ You've Hit Milestone 1.1: NestJS Server Running

**Current Status**: NestJS server starts successfully and shows "Hello World!" at http://localhost:3000

## **Next Milestone: 1.2 - Database Connection Configuration**

Now let's connect your NestJS server to your MySQL database that's running in Docker.

### **Step 1: Start Your Database Services**

First, make sure your databases are running:

```bash
# From your minimeet/ root directory (not minimeet-server/)
cd ..  # Go back to minimeet/ root
docker-compose up -d

# Verify databases are running
docker ps
# Should show minimeet-mysql, minimeet-mongo, minimeet-redis containers
#
# # From your minimeet/ directory, when ENDing
docker-compose down
```

**Test milestone**: All 3 containers should show "Up" status

### **Step 2: Configure TypeORM Connection**

**Edit `minimeet-server/src/app.module.ts`**:

```typescript
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ConfigModule } from '@nestjs/config';
import { AppController } from './app.controller';
import { AppService } from './app.service';

@Module({
  imports: [
    ConfigModule.forRoot({
      isGlobal: true,
    }),
    TypeOrmModule.forRoot({
      type: 'mysql',
      host: 'localhost',
      port: 3306,
      username: 'root',
      password: 'password',
      database: 'minimeet',
      autoLoadEntities: true,
      synchronize: true, // Only for development!
      logging: true, // Shows SQL queries in console
    }),
  ],
  controllers: [AppController],
  providers: [AppService],
})
export class AppModule {}
```


### **Step 3: Test Database Connection**

```bash
# From minimeet-server/ directory
npm run start:dev
```

**Success criteria**: Look for these logs in your terminal:

- âœ… "Application is running on: http://localhost:3000"
- âœ… "TypeORM connection has been established successfully"
- âœ… No database connection errors

**Test milestone**: Visit http://localhost:3000 - should still show "Hello World!" **AND** database connection logs should appear in terminal.

## **Milestone 1.3: Create Your First Entity (User)**

Once database connection works, create your first entity:

### **Generate User Module**

```bash
# From minimeet-server/ directory
npx nest generate module users
npx nest generate service users
npx nest generate controller users
```

**Test milestone**: Should see new files created:

```
src/
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ users.module.ts
â”‚   â”œâ”€â”€ users.service.ts
â”‚   â””â”€â”€ users.controller.ts
```


### **Create User Entity**

**Create `src/users/entities/user.entity.ts`**:

```typescript
import { Entity, Column, PrimaryGeneratedColumn, CreateDateColumn, UpdateDateColumn } from 'typeorm';

@Entity()
export class User {
  @PrimaryGeneratedColumn('uuid')
  id: string;

  @Column({ unique: true })
  email: string;

  @Column()
  username: string;

  @Column({ default: true })
  isActive: boolean;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;
}
```


### **Update Users Module**

**Edit `src/users/users.module.ts`**:

```typescript
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { UsersService } from './users.service';
import { UsersController } from './users.controller';
import { User } from './entities/user.entity';

@Module({
  imports: [TypeOrmModule.forFeature([User])],
  controllers: [UsersController],
  providers: [UsersService],
  exports: [UsersService], // Export for use in other modules
})
export class UsersModule {}
```


### **Add Basic User Service**

**Edit `src/users/users.service.ts`**:

```typescript
import { Injectable } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { User } from './entities/user.entity';

@Injectable()
export class UsersService {
  constructor(
    @InjectRepository(User)
    private usersRepository: Repository<User>,
  ) {}

  async create(email: string, username: string): Promise<User> {
    const user = this.usersRepository.create({ email, username });
    return this.usersRepository.save(user);
  }

  async findAll(): Promise<User[]> {
    return this.usersRepository.find();
  }

  async findOne(id: string): Promise<User> {
    return this.usersRepository.findOneBy({ id });
  }
}
```


### **Add Basic User Controller**

**Edit `src/users/users.controller.ts`**:

```typescript
import { Controller, Get, Post, Body, Param } from '@nestjs/common';
import { UsersService } from './users.service';

@Controller('users')
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @Post()
  async create(@Body() createUserDto: { email: string; username: string }) {
    return this.usersService.create(createUserDto.email, createUserDto.username);
  }

  @Get()
  async findAll() {
    return this.usersService.findAll();
  }

  @Get(':id')
  async findOne(@Param('id') id: string) {
    return this.usersService.findOne(id);
  }
}
```


### **Update App Module**

**Edit `src/app.module.ts` to include UsersModule**:

```typescript
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { ConfigModule } from '@nestjs/config';
import { AppController } from './app.controller';
import { AppService } from './app.service';
import { UsersModule } from './users/users.module'; // Add this

@Module({
  imports: [
    ConfigModule.forRoot({
      isGlobal: true,
    }),
    TypeOrmModule.forRoot({
      type: 'mysql',
      host: 'localhost',
      port: 3306,
      username: 'root',
      password: 'password',
      database: 'minimeet',
      autoLoadEntities: true,
      synchronize: true,
      logging: true,
    }),
    UsersModule, // Add this
  ],
  controllers: [AppController],
  providers: [AppService],
})
export class AppModule {}
```


## **Milestone 1.4: Test User CRUD Operations**

**Restart your server**:

```bash
npm run start:dev
```

**Success criteria**: Look for these logs:

- âœ… "Database connection established"
- âœ… SQL query logs showing table creation: `CREATE TABLE user`
- âœ… No TypeORM errors

**Test with curl commands**:

```bash
# Create a user
curl -X POST http://localhost:3000/users \
  -H "Content-Type: application/json" \
  -d '{"email":"john@example.com","username":"johndoe"}'

# Should return: {"id":"uuid-string","email":"john@example.com","username":"johndoe","isActive":true,"createdAt":"...","updatedAt":"..."}
```

```bash
# Get all users
curl http://localhost:3000/users

# Should return: [{"id":"uuid-string","email":"john@example.com",...}]
```

```bash
# Get specific user (use the ID from create response)
curl http://localhost:3000/users/YOUR-USER-ID-HERE

# Should return: {"id":"uuid-string","email":"john@example.com",...}
```


## **What You Can Demo After This Milestone**

After completing Milestone 1.4, you can say:

> "I built a NestJS backend that connects to MySQL database and provides REST API for user management. I can create users, retrieve all users, and get individual users by ID. The database automatically creates tables from my TypeScript entities using TypeORM."

## **Next Steps Preview**

Once user CRUD works, you'll:

- **Milestone 2.1**: Create Room entity with many-to-many user relationships
- **Milestone 2.2**: Add Socket.io for real-time communication
- **Milestone 2.3**: Implement WebRTC signaling events

Each milestone builds on the previous one, ensuring you always have a working system to demonstrate!
